<!DOCTYPE html>
<html>

<head>
    <title>Generate Form 12BB Free</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <style>
        body {
            font-family: ui-monospace;
            width: 100%;
            padding: 20px 30px;
            margin: 0;
            font-size: 12px;
            box-sizing: border-box
        }

        h1 {
            text-align: center;
            font-weight: 400;
            color: #000;
            font-size: 24px
        }

        h2 {
            display: block;
            text-align: Center;
            font-weight: 400;
            color: #000;
            margin: 0;
            font-size: 18px;
            padding: 20px 0
        }

        h2 small {
            display: block;
            font-size: 14px;
            margin-top: 7px
        }

        table {
            margin: 0 0 30px;
            font-size: 14px;
            font-family: ui-monospace
        }

        td {
            word-wrap: break-word;
            border: 1px solid #000;
            vertical-align: top
        }

        .header {
            width: 100%;
            position: fixed
        }

        .footer {
            width: 100%;
            text-align: center;
            position: fixed
        }

        .header {
            top: 0
        }

        .footer {
            bottom: 0
        }

        .footercreated,
        .footerbrand {
            width: 100%;
            position: fixed;
            text-align: right;
            bottom: 0
        }

        .footerbrand {
            text-align: left
        }

        .pagenum:before {
            content: counter(page)
        }

        .flat-table {
            width: 100%;
            border-collapse: collapse
        }

        .flat-table td:last-child,
        .flat-table th:last-child {
            border-right: 1px solid #000
        }

        .flat-table tr:last-child td {
            border-bottom: 1px solid #000
        }

        .flat-table .th {
            width: 25%;
            color: #000;
            font-weight: 700;
            padding: 8px 15px;
            text-align: center;
            border-top: 1px solid #000;
            border-left: 1px solid #000;
            box-sizing: border-box
        }

        .flat-table .thsub {
            color: #000;
            font-weight: 700;
            padding: 8px 15px;
            text-align: left;
            border-top: 1px solid #000;
            border-top: 1px solid #000;
            border-left: 1px solid #000;
            box-sizing: border-box
        }

        .flat-table td {
            color: #061D3E;
            padding: 8px 15px;
            border-top: 1px solid #000;
            border-left: 1px solid #000;
            text-align: left;
            box-sizing: border-box
        }

        .flat-table .tdm {
            color: #061D3E;
            padding: 8px 35px;
            border-top: 1px solid #000;
            border-left: 1px solid #000;
            text-align: left;
            box-sizing: border-box
        }

        .c2,
        .c3,
        .text-right {
            text-align: right !important
        }

        .text-left {
            text-align: left !important
        }

        .page-break-before {
            page-break-inside: avoid;
            page-break-after: auto
        }

        .botless {
            border-bottom: none !important
        }

        .topless {
            border-top: none !important
        }
    </style>
</head>

<body>
    <div class="footer">Page <span class="pagenum"></span></div>
    <div class="footerbrand">Form 12BB generated using Myitronline.com</div>
    <div class="footercreated" style="margin-left: -33px;">{{ date('m/d/Y H:i:s', $data->createdOn) }}</div>
    <table class="flat-table" border="0">
        <tbody>
            <tr>
                <td class="thsub" style="width: 50%">
                    <img alt="myitronline.com" src="https://myitronline.com/images/myitronline-logo.jpg" style="width: 194px;">
                </td>
                <td style="text-align: right; width:50%;line-height: 35.2px;">
                    <h3 style="font-size: 22px;margin-bottom: 0px;margin-top: 2px">{{ $data->receiptId }}</h3>
                    <h5 style="font-size: 16px;margin-top: 0px;margin-bottom: 0px;">{{ $data->created_at }}</h5>
                </td>
            </tr>
           
        </tbody>
    </table>
    <p style="font-family: 'Open Sans', sans-serif; font-size: 20px; margin-bottom: 0px; text-align: center;">
        <strong>FORM NO.12BB</strong>
    </p>
    <p style="text-align:center; font-family: 'Open Sans', sans-serif; margin-top: 0px">[See rule 26C]</p>
    <h2 class="th" colspan="2">Statement showing particulars of claims by an employee for deduction of tax under
        section 192</h2>
    <table class="flat-table" id="headingtab" border="0">
        <tbody>
            <tr>
                <td class="thsub" style="width: 50%">Name and address of the employee:</td>
                <td style="text-align: left; width:50%;line-height: 21.2px;">
                    <span style="text-transform: uppercase;">{{ $data->fullName }}</span><br>
                    <span style="text-transform: uppercase;">{{ $data->houseAddress }}</span><br>
                    <span>{{ $data->emailId }}</span>
                </td>
            </tr>
            <tr>
                <td class="thsub" style=" width:50%">Permanent Account Number of the employee:</td>
                <td style="text-align: left; width:50%;text-transform: uppercase;">{{ $data->pan }}</td>
            </tr>
            <tr>
                <td class="thsub" style=" width:50%">Financial Year:</td>
                <td style="text-align: left; width:50%">{{ $data->fy }}</td>
            </tr>
        </tbody>
    </table>
    <div class="page-break-before"></div>
    <p style="text-align:center; font-size: 16px;">
        <strong>Details of claims and evidence thereof</strong>
    </p>
    <table class="flat-table">
        <tbody>
            <tr>
                <td style="width:1%" class="th text-left">S.No.</td>
                <td style="width:59%" class="th text-left">Nature of claim</td>
                <td style="width:20%" class="th text-left">Amount(Rs.)</td>
                <td style="width:20%" class="th text-left">Evidence/Particulars</td>
            </tr>
            <tr>
                <td class="thsub botless" style="width:1%">1</td>
                <td class="thsub botless" style="width:59%">House Rent Allowance:</td>
                <td class="thsub botless" style="width:20%"></td>
                <td class="thsub botless" style="width:20%"></td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%; word-wrap:">(i) Rent paid to the
                    landlord</td>
                <td class="botless topless" style="width:20%">Rs.{{ $data->hraRentPaidToLandlord }}</td>
                <td class="botless topless" style="width:20%; border:1px solid #000;text-transform: capitalize;">
                    {{ strtoupper($data->hraEvidence) }}</td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%; word-wrap:">(ii) Name of the landlord
                </td>
                <td class="botless topless" style="width:20%">{{ strtoupper($data->hraLandlordName) }}</td>
                <td class="botless topless" style="width:20%; text-transform: capitalize;"> </td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px;width:59%; word-wrap:">(iii) Address of the
                    landlord</td>
                <td class="botless topless" style="width:20%"> {{ strtoupper($data->hraLandlordAddress) }}</td>
                <td class="botless topless" style="width:20%; text-transform: capitalize;"></td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px;width:59%; word-wrap:">(iv) [Permanent Account
                    Number or AadhaarNumber] of the landlord</td>
                <td class="botless topless" style="width:20%; text">{{ strtoupper($data->hraLandlordPan) }}</td>
                <td class="botless topless" style="width:20%;text-transform: uppercase;"></td>
            </tr>
            <tr>
                <td class="topless" style="width:1%"></td>
                <td colspan="3" style="width:30%; word-wrap:"><b>Note:</b> [Permanent Account Number or Aadhaar
                    Number] shall be furnished if the aggregate rent paid during the previous year exceeds one lakh
                    rupees</td>
            </tr>

            @php
                $itaAmounts = json_decode($data->itaAmount);
                $itaEvidences = json_decode($data->itaEvidence);
            @endphp

            @if (empty($itaAmounts) || empty($itaEvidences))
                <tr>
                    <td class="thsub" style="width:1%">2</td>
                    <td class="thsub" style="width:59%">Leave Travel Allowance / Concession (LTA / LTC)</td>
                    <td class="botless" style="width:20%"></td>
                    <td class="botless" style="width:20%"></td>
                </tr>
            @elseif(count($itaAmounts) === 1)
                <tr>
                    <td class="thsub" style="width:1%">2</td>
                    <td class="thsub" style="width:59%">Leave travel concessions or assistance</td>
                    <td style="width:20%">{{ $itaAmounts[0] }}</td>
                    <td style="width:20%; border:1px solid #000;text-transform: capitalize;">
                        {{ $itaEvidences[0] }}
                    </td>
                </tr>
            @else
                <tr>
                    <td class="thsub" style="width:1%">2</td>
                    <td class="thsub" style="width:59%">Leave Travel Allowance / Concession (LTA / LTC)</td>
                    <td class="botless" style="width:20%"></td>
                    <td class="botless" style="width:20%"></td>
                </tr>
                @foreach ($itaAmounts as $key => $amount)
                    <tr>
                        <td class="thsub" style="width:1%"></td>
                        <td class="thsub" style="width:59%">Leave travel concessions or assistance</td>
                        <td style="width:20%">{{ $amount }}</td>
                        <td style="width:20%; border:1px solid #000;text-transform: capitalize;">
                            {{ $itaEvidences[$key] }}
                        </td>
                    </tr>
                @endforeach
            @endif


            <tr>
                <td class="botless thsub" style="width:1%">3</td>
                <td class="thsub botless" style="width:59%">Deduction of interest on borrowing:</td>
                <td class="botless" style="width:20%"></td>
                <td class="botless" style="width:20%"></td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(i) Interest payable/paid to the
                    lender</td>
                <td class="botless topless" style=" width:20%">{{ $data->homeLoanInterestPayable }}</td>
                <td class="botless topless" style=" width:20%;text-transform: capitalize;">
                    {{ $data->homeLoanLenderEvidence }}</td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(ii) Name of the lender</td>
                <td class="botless topless" style=" width:20%"> {{ strtoupper($data->homeLoanLenderName) }}</td>
                <td class="botless topless" style=" width:20%;text-transform: capitalize;"></td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(iii) Address of the lender</td>
                <td class="botless topless" style=" width:20%"> {{ strtoupper($data->homeLoanLenderAddress) }}</td>
                <td class="botless topless" style=" width:20%;text-transform: capitalize;"></td>
            </tr>

            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(iv) Permanent Account Number of the
                    lender</td>
                <td class="botless topless" style=" width:20%"> {{ strtoupper($data->homeLoanLenderPan) }}</td>
                <td class="botless topless" style=" width:20%;text-transform: uppercase;"> </td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(a) Financial Institutions(if
                    available)</td>
                <td class="botless topless" style=" width:20%"></td>
                <td class="botless topless" style=" width:20%"></td>
            </tr>
            <tr>
                <td class="botless topless" style="width:1%"></td>
                <td class="botless topless" style="padding-left:28px; width:59%">(b) Employer(if available)</td>
                <td class="botless topless" style=" width:20%"></td>
                <td class="botless topless" style=" width:20%"></td>
            </tr>
            <tr>
                <td class="topless" style="width:1%"></td>
                <td class="topless" style="padding-left:28px; width:59%">(c) Others</td>
                <td class="topless" style=" width:20%"></td>
                <td class="topless" style=" width:20%"></td>
            </tr>
            <tr>
                <td class="botless thsub" style="width:1%">4</td>
                <td class="botless thsub" style="width:59%">Deduction under Chapter VI-A</td>
                <td class="botless thsub" style="width:20%"></td>
                <td class="botless" style="width:20%"></td>
            </tr>
            <tr>
                <td class="botless topless thsub" style="width:1%"></td>
                <td class="botless topless thsub" style="width:59%">(A). Section 80C</td>
                <td class="botless topless thsub" style="width:20%"></td>
                <td class="botless topless" style="width:20%"></td>
            </tr>

            @php
                $eCA = isset($data->dednEightyCAmount) ? json_decode($data->dednEightyCAmount, true) : [];
                $eCE = isset($data->dednEightyCEvidence) ? json_decode($data->dednEightyCEvidence, true) : [];
                $ecn = isset($data->dednEightyC) ? json_decode($data->dednEightyC, true) : [];

                // Function to convert integer to Roman numeral
                function intToRoman($num)
                {
                    $map = [
                        'M' => 1000,
                        'CM' => 900,
                        'D' => 500,
                        'CD' => 400,
                        'C' => 100,
                        'XC' => 90,
                        'L' => 50,
                        'XL' => 40,
                        'X' => 10,
                        'IX' => 9,
                        'V' => 5,
                        'IV' => 4,
                        'I' => 1,
                    ];
                    $returnValue = '';
                    foreach ($map as $roman => $int) {
                        while ($num >= $int) {
                            $returnValue .= $roman;
                            $num -= $int;
                        }
                    }
                    return $returnValue;
                }
            @endphp

            @if (!empty($ecn) && !empty($eCA) && !empty($eCE))
                @foreach ($ecn as $i => $dednEightyC)
                    <tr>
                        <td class="botless topless" style="width:1%"></td>
                        <td class="botless topless" style="padding-left:38px; width:59%">
                            ({{ intToRoman($i + 1) }})
                            {{ $dednEightyC }}
                        </td>
                        <td class="botless topless" style="width:20%">
                            @if (isset($eCA[$i]))
                                {{ $eCA[$i] }}
                            @endif
                        </td>
                        <td class="botless topless" style="width:20%; text-transform: capitalize;">
                            @if (isset($eCE[$i]))
                                {{ strtoupper($eCE[$i]) }}
                            @endif
                        </td>
                    </tr>
                @endforeach
            @endif




            <tr>
                <td class="topless botless" style="width:1%"></td>
                <td class="topless botless thsub" style="width:59%">(B) Other Deductions.</td>
                <td class="topless botless" style="width:20%"></td>
                <td class="topless botless" style="width:20%"></td>
            </tr>

            @php
                $dOE = isset($data->dednOtherEvidence) ? json_decode($data->dednOtherEvidence, true) : [];
                $dOA = isset($data->dednOtherAmount) ? json_decode($data->dednOtherAmount, true) : [];
                $dO = isset($data->dednOther) ? json_decode($data->dednOther, true) : [];
                $dOLength = count($dO); // Assuming $dO is an array, get its length
                $cll = 0;
            @endphp

            @if ($dOLength > 0)
                @foreach ($dO as $i => $dednOtherItem)
                    <tr>
                        <td class="botless topless" style="width:1%"></td>
                        <td class="botless topless" style="padding-left:28px; width:59%">
                            ({{ intToRoman($i + 1) }}) Section {{ substr($dednOtherItem, 0, 10) }}
                        </td>
                        <td class="botless topless" style="width:20%">
                            @if (isset($dOA[$i]))
                                {{ $dOA[$i] }}
                            @endif
                        </td>
                        <td class="botless topless" style="width:20%; text-transform: capitalize;">
                            @if (isset($dOE[$i]))
                                {{ strtoupper($dOE[$i]) }}
                            @endif
                        </td>
                    </tr>
                @endforeach
            @endif
            <tr>
                <td class="thsub" style="text-align: center;" colspan="4">Verification</td>
            </tr>

            <tr>
                <td colspan="4">I,
                    <strong><span style="text-transform: uppercase;">{{ $data->fullName }}</span></strong>,
                    son/daughter of
                    <strong><span style="text-transform: uppercase;">{{ $data->fathersName }}</span></strong> do
                    hereby certify that the information given above is complete and correct.
                </td>
            </tr>

            <tr>
                <td style="width: 40%" colspan="2">
                    Place: <strong><span style="text-transform: capitalize;">{{ $data->place }}</span></strong>
                </td>
                <td class="botless" style="width: 40%" colspan="2"></td>
            </tr>

            <tr>
                <td style="width: 40%" colspan="2">
                    Date: <strong>{{ date('m/d/Y', $data->createdOn) }}</strong>
                </td>
                <td class="topless" style="vertical-align: bottom;width: 60%" colspan="2">Signature of the
                    employee</td>
            </tr>

            <tr>
                <td style="width: 40%; text-transform: capitalize;" colspan="2">Designation:
                    <strong>{{ $data->designationEmp }}</strong>
                </td>
                <td style="width: 60%" colspan="2">
                    Full Name: <strong><span style="text-transform: uppercase;">{{ $data->fullName }}</span></strong>
                </td>
            </tr>

        </tbody>
    </table>
</body>

</html>
